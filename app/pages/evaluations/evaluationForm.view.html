<div id="evaluationForm" ng-controller="evaluationFormController" ng-init="init()">
    <div style="float:right; width:32vw;">
		<div class="panel panel-success ">
			<div class="panel-heading" style="text-align:center;">
				<strong>Rating Scale Definition</strong>
			</div>
			<div class="panel-body">
			   <div class="row">
						<div class="form-group col-xs-4">
							<div class="formNotes"><b>1=Performance Improvement Needed </b></div>
						</div>
						<div class="form-group col-xs-8">
							<div class="formNotes">
							   ‒  Performs considerably below the required level
								   <br>
							   ‒  It is a stern warning that definite improvement is needed and required
							</div>
						</div>
				</div>
				<div class="row">
						<div class="form-group col-xs-4">
							<div class="formNotes"><b>2=Building Capability </b></div>
						</div>
						<div class="form-group col-xs-8">
							<div class="formNotes">
							   ‒  Performs slightly below the required level
								   <br>
							   ‒  Performance can be improved with consistent effort
								   <br>
							   ‒  Conveys the expectation and confidence that the individual can and will improve capability, by focusing on some areas
							</div>
						</div>
				</div>
				<div class="row">
						<div class="form-group col-xs-4">
						 <div class="formNotes"><b>3=Achieving Performance </b></div>
						</div>
						<div class="form-group col-xs-8">
							<div class="formNotes">
							   ‒  Performs at the required level
								   <br>
							   ‒  Has achieved the required level of performance, according to expectations and requirements
								   <br>
							   ‒  Demonstrates good or strong performance
							</div>
						</div>
				</div>
				<div class="row">
						<div class="form-group col-xs-4">
							<div class="formNotes"><b>4=Leading Performance </b></div>
						</div>
						<div class="form-group col-xs-8">
							<div class="formNotes">
							   ‒  Performs better than the required level
								   <br>
							   ‒  Signifies real contribution and impact over and above the required level
								   <br>
							   ‒  Displays excellent capability level
							</div>
						</div>
				</div>
			</div>
		</div>
		<div class="panel panel-success ">
			<div class="panel-heading" style="text-align:center;">
				<strong>Section Scores</strong>
			</div>
			<div class="panel-body">
				<table class="table table-bordered formNotes table-bordered-custom" ng-show="showScoresMessage('none')">
					<col width="25%" />
					<col width="25%" />
                    <col ng-if="state >= arcopmState.EvalByDotted && hasDotted >= 1" width="25%" />
					<col width="25%" />
					<thead>
						<tr>
							<th rowspan="2" style="text-align: center;"><b>Performance Elements</b></th>
                            <th colspan="{{state >= arcopmState.EvalByDotted && hasDotted>=1 ? '3' : '2'}}" style="text-align: center;"><b>Actual Scores</b></th>
						</tr>
						<tr>
							<th style="text-align: center;"><b>Employee Score</b>
                                <div class="notifications" ng-click="showScoresNotifications('empHistorySectionScores')" style="background-color: #d1d1d1;"
                                     uib-tooltip="Show Employee's Score History" tooltip-placement="top" tooltip-trigger="'mouseenter'">
                                    <div class="toggle">H</div>
                                    <div class="messages empHistorySectionScores">
                                        <table class="table table-bordered formNotes table-bordered-custom emphistoryscores">
                                            <thead>
                                                <tr>
                                                    <th style="text-align: center;"><b>Evaluation Cycle</b></th>
                                                    <th ng-repeat="score in scores track by $index" style="text-align: center; vertical-align: top;" class="{{scoreClasses[$index]}}"><b>{{score.SectionDescription}}</b></th>
                                                </tr>
                                                <tr>
                                            </thead>
                                            <tbody ng-repeat="emphistory in empHistory track by $index">
                                                <tr ng-attr-style="{{$index%2==0 ? 'background-color:white' : 'background-color:#f0f0f0' }}">
                                                    <td rowspan="2" style="vertical-align: middle;"><b>{{emphistory.CycleDescription}}</b></td>
                                                    <td style="vertical-align: middle;font-size: 11px;">{{emphistory.PScore}}</td>
                                                    <td style="vertical-align: middle;font-size: 11px;">{{emphistory.GScore}}</td>
                                                    <td style="vertical-align: middle;font-size: 11px;">{{emphistory.CScore}}</td>
                                                    <td style="vertical-align: middle;font-size: 11px;">{{emphistory.LScore}}</td>
                                                </tr>
                                                <tr ng-attr-style="{{$index%2==0 ? 'background-color:white' : 'background-color:#f0f0f0' }}">
                                                    <td style="vertical-align: middle;">{{emphistory.PSDescription}}</td>
                                                    <td style="vertical-align: middle;">{{emphistory.GSDescription}}</td>
                                                    <td style="vertical-align: middle;">{{emphistory.CSDescription}}</td>
                                                    <td style="vertical-align: middle;">{{emphistory.LSDescription}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </th>
                            <th ng-if="state >= arcopmState.EvalByDotted && hasDotted >= 1" style="text-align: center;"><b>Dotted Score</b>
                                <div class="notifications" ng-if="hasDotted > 1 && state > arcopmState.EvalByDotted" ng-click="showScoresNotifications('dottedSectionScores')">
                                    <div class="toggle">D</div>
                                    <div class="messages dottedSectionScores">
                                        <table class="table table-bordered formNotes table-bordered-custom dottedscores">
                                            <col width="25%" />
                                            <col width="25%" />
                                            <col width="25%" />
                                            <col width="25%" ng-if="hasDotted > 2"/>
                                            <thead>
                                                <tr>
                                                    <th rowspan="2" style="text-align: center;"><b>Performance Elements</b></th>
                                                    <th colspan="{{state >= arcopmState.EvalByDotted && hasDotted>2 ? '3' : '2'}}" style="text-align: center;"><b>Dotted Scores</b></th>
                                                </tr>
                                                <tr>
                                                    <th ng-if="dottedScores[0].Dot1Name != null" style="text-align: center;"><b>{{dottedScores[0].Dot1Name}}</b></th>
                                                    <th ng-if="dottedScores[0].Dot2Name != null" style="text-align: center;"><b>{{dottedScores[0].Dot2Name}}</b></th>
                                                    <th ng-if="dottedScores[0].Dot3Name != null" style="text-align: center;"><b>{{dottedScores[0].Dot3Name}}</b></th>
                                                </tr>
                                            </thead>
                                            <tbody ng-repeat="dottedScore in dottedScores track by $index" ng-if="dottedScore.SectionID != 10">
                                                <tr class="{{scoreClasses[$index]}}">
                                                    <td rowspan="3"><br/><b>{{dottedScore.SectionDescription}} Score Average</b></td>
                                                </tr>
                                                <tr class="{{scoreClasses[$index]}}">
                                                    <td style="text-align: center; font-size: 12px;">{{dottedScore.Dot1Score}}</td>
                                                    <td style="text-align: center; font-size: 12px;">{{dottedScore.Dot2Score}}</td>
                                                    <td style="text-align: center; font-size: 12px;"  ng-if="hasDotted > 2">{{dottedScore.Dot3Score}}</td>
                                                </tr>
                                                <tr class="{{scoreClasses[$index]}}">
                                                    <td style="text-align: center;"><b>{{dottedScore.Dot1Description}}</b></td>
                                                    <td style="text-align: center;"><b>{{dottedScore.Dot2Description}}</b></td>
                                                    <td style="text-align: center;"  ng-if="hasDotted > 2"><b>{{dottedScore.Dot3Description}}</b></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        
                                    </div>
                                </div>
                            </th>
							<th ng-if="userRole != 'emp'" style="text-align: center;"><b>Evaluator Score</b></th>
							<th ng-if="userRole == 'emp'" style="text-align: center;"><b>Evaluation Final Score</b></th>
						</tr>
					</thead>
					<tbody ng-repeat="score in scores track by $index">
						<tr class="{{scoreClasses[$index]}}" >
							<td rowspan="2"><br/><b>{{score.SectionDescription}}' Score Average</b></td>
							<td style="text-align: center; font-size: 12px;">{{score.EmpScore == null ? '-' : score.EmpScore}}</td>
                            <td ng-if="state >= arcopmState.EvalByDotted && hasDotted >= 1" style="text-align: center; font-size: 12px;">{{score.DotScore == null ? '-' : score.DotScore}}</td>
							<td ng-if="userRole != 'emp'" style="text-align: center; font-size: 12px;">{{score.EvalScore == null ? '-' : score.EvalScore}} / <label style="color: green;">{{score.RevScore == null ? '-' : score.RevScore}}</label></td>
							<td ng-if="userRole == 'emp'" style="text-align: center; font-size: 12px;">{{score.RevScore == null ? '-' : score.RevScore}}</td>
						</tr>
						<tr class="{{scoreClasses[$index]}}">
							<td ng-if='score.SectionID!=3' style="text-align: center;"><b>{{score.EmpScore == null ? '-' : score.EmpScore < 1.50 ? scoreDefinition[0] : score.EmpScore < 3 ? scoreDefinition[1] : score.EmpScore < 3.5 ? scoreDefinition[2] : scoreDefinition[3] }}</b></td>
                            <td ng-if='score.SectionID!=3 && state >= arcopmState.EvalByDotted && hasDotted >= 1' style="text-align: center;"><b>{{score.DotScore == null ? '-' : score.DotScore < 1.50 ? scoreDefinition[0] : score.DotScore < 3 ? scoreDefinition[1] : score.DotScore < 3.5 ? scoreDefinition[2] : scoreDefinition[3] }}</b></td>
							<td ng-if='score.SectionID!=3 && userRole != "emp"' style="text-align: center;">
								<b>{{score.EvalScore == null ? '-' : score.EvalScore < 1.50 ? scoreDefinition[0] : score.EvalScore < 3 ? scoreDefinition[1] : score.EvalScore < 3.5 ? scoreDefinition[2] : scoreDefinition[3] }}</b>
								/ <label style="color: green;">{{score.RevScore == null ? '-' : score.RevScore < 1.50 ? scoreDefinition[0] : score.RevScore < 3 ? scoreDefinition[1] : score.RevScore < 3.5 ? scoreDefinition[2] : scoreDefinition[3] }}</label>
							</td>
							<td ng-if='score.SectionID!=3 && userRole == "emp"' style="text-align: center;"><b>{{score.RevScore == null ? '-' : score.RevScore < 1.50 ? scoreDefinition[0] : score.RevScore < 3 ? scoreDefinition[1] : score.RevScore < 3.5 ? scoreDefinition[2] : scoreDefinition[3] }}</b></td>

							<td ng-if='score.SectionID==3' style="text-align: center;"><b>{{score.EmpScore == null ? '-' : score.EmpScore < 2.5 ? scoreDefinition[0] : score.EmpScore < 3 ? scoreDefinition[1] : score.EmpScore < 3.5 ? scoreDefinition[2] : scoreDefinition[3] }}</b></td>
                            <td ng-if='score.SectionID==3 && state >= arcopmState.EvalByDotted && hasDotted >= 1' style="text-align: center;"><b>{{score.DotScore == null ? '-' : score.DotScore < 2.5 ? scoreDefinition[0] : score.DotScore < 3 ? scoreDefinition[1] : score.DotScore < 3.5 ? scoreDefinition[2] : scoreDefinition[3] }}</b></td>
							<td ng-if='score.SectionID==3 && userRole != "emp"' style="text-align: center;">
								<b>{{score.EvalScore == null ? '-' : score.EvalScore < 2.5 ? scoreDefinition[0] : score.EvalScore < 3 ? scoreDefinition[1] : score.EvalScore < 3.5 ? scoreDefinition[2] : scoreDefinition[3] }}</b>
								/ <label style="color: green;">{{score.RevScore == null ? '-' : score.RevScore < 2.5 ? scoreDefinition[0] : score.RevScore < 3 ? scoreDefinition[1] : score.RevScore < 3.5 ? scoreDefinition[2] : scoreDefinition[3] }}</label>
							</td>
							<td ng-if='score.SectionID==3 && userRole == "emp"' style="text-align: center;"><b>{{score.RevScore == null ? '-' : score.RevScore < 2.49 ? scoreDefinition[0] : score.RevScore < 2.99 ? scoreDefinition[1] : score.RevScore < 3.49 ? scoreDefinition[2] : scoreDefinition[3] }}</b></td>
						</tr>
					</tbody>
				</table>
				<label style="color: green; font-size: 11px;">* Evaluator's revision scores.</label>
				<div class="container" ng-show="showScoresMessage('loading')" style="width: 605px;">
					<div class="content">
						<div class="circle"></div>
						<div class="circle1"></div>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-success ">
			<div class="panel-heading" style="text-align:center;">
				<strong>Summary Table</strong>
			</div>
			<div class="panel-body">
				<table class="table table-bordered formNotes" ng-show="showScoresMessage('none')">
					<thead>
						<tr>
							<th rowspan="2" style="vertical-align: middle;"><b>Performance Elements</b></th>
							<th rowspan="2" style="vertical-align: middle; text-align: center;"><b>Weight %</b></th>
                            <th colspan="{{state >= arcopmState.EvalByDotted && hasDotted >= 1 ? '3' : '2'}}" style="text-align: center;"><b>Weighted Scores</b></th>  <!-- colspan="6" if we open the 3 columns we commented out below-->
						</tr>
						<tr>
							<!--<th style="text-align: center; border-left-width: 2px;"><b>Actual Employee Score</th>-->
							<th style="text-align: center; border-right-width: 2px; vertical-align: top;"><b>Employee Score</b>
                                <div class="notifications" ng-click="showScoresNotifications('empHistorySummaryTable')" style="background-color: #d1d1d1;"
                                     uib-tooltip="Show Employee's Score History" tooltip-placement="top" tooltip-trigger="'mouseenter'">
                                    <div class="toggle">H</div>
                                    <div class="messages empHistorySummaryTable">
                                        <table class="table table-bordered formNotes table-bordered-custom emphistoryscores">
                                            <thead>
                                                <tr>
                                                    <th style="text-align: center;"><b>Evaluation Cycle</b></th>
                                                    <th ng-repeat="score in scores track by $index" style="text-align: center; vertical-align: top;" class="{{scoreClasses[$index]}}"><b>{{score.SectionDescription}}</b></th>
                                                    <th style="background-color: #9fc995;"><b>Overall Performance Score</b></th>
                                                </tr>
                                                <tr>
                                            </thead>
                                            <tbody ng-repeat="emphistory in empHistory track by $index">
                                                <tr ng-attr-style="{{$index%2==0 ? 'background-color:white' : 'background-color:#f0f0f0' }}">
                                                    <td style="vertical-align: middle;"><b>{{emphistory.CycleDescription}}</b></td>
                                                    <td style="vertical-align: middle;font-size: 11px;">{{parseFloat(emphistory.PWeightedScore).toFixed(2)}}</td>
                                                    <td style="vertical-align: middle;font-size: 11px;">{{parseFloat(emphistory.GWeightedScore).toFixed(2)}}</td>
                                                    <td style="vertical-align: middle;font-size: 11px;">{{parseFloat(emphistory.CWeightedScore).toFixed(2)}}</td>
                                                    <td style="vertical-align: middle;font-size: 11px;">{{parseFloat(emphistory.LWeightedScore).toFixed(2)}}</td>
                                                    <td style="vertical-align: middle;font-size: 11px;">{{parseFloat(emphistory.OverallScore).toFixed(2)}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </th>
                            <th ng-if="state >= arcopmState.EvalByDotted && hasDotted >= 1" style="text-align: center; border-right-width: 2px; vertical-align: top;"><b>Dotted Score</b>
                                <div class="notifications" ng-if="hasDotted > 1 && state > arcopmState.EvalByDotted" ng-click="showScoresNotifications('dottedSummaryTable')">
                                    <div class="toggle">D</div>
                                    <div class="messages dottedSummaryTable">
                                        <table class="table table-bordered formNotes dottedscores">
                                            <col width="22%" />
                                            <col width="13%" />
                                            <col width="13%" />
                                            <col width="13%" />
                                            <col width="13%" />
                                            <col width="13%" />
                                            <col width="13%" ng-if="hasDotted > 2"/>
                                            <thead>
                                                <tr>
                                                    <th rowspan="2" style="text-align: center;"><b>Performance Elements</b></th>
                                                    <th colspan="{{state >= arcopmState.EvalByDotted && hasDotted>2 ? '6' : '4'}}" style="text-align: center;"><b>Dotted Scores</b></th>
                                                </tr>
                                                <tr>
                                                    <th ng-if="dottedScores[0].Dot1Name != null" style="text-align: center;"><b>Weight %</b></th>
                                                    <th ng-if="dottedScores[0].Dot1Name != null" style="text-align: center;"><b>{{dottedScores[0].Dot1Name}}</b></th>
                                                    <th ng-if="dottedScores[0].Dot2Name != null" style="text-align: center;"><b>Weight %</b></th>
                                                    <th ng-if="dottedScores[0].Dot2Name != null" style="text-align: center;"><b>{{dottedScores[0].Dot2Name}}</b></th>
                                                    <th ng-if="dottedScores[0].Dot3Name != null" style="text-align: center;"><b>Weight %</b></th>
                                                    <th ng-if="dottedScores[0].Dot3Name != null" style="text-align: center;"><b>{{dottedScores[0].Dot3Name}}</b></th>
                                                </tr>
                                            </thead>
                                            <tbody ng-repeat="dottedScore in dottedScores track by $index">
                                                <tr class="{{dottedScore.SectionID!=10 ? scoreClasses[$index] : 'overall'}}">
                                                    <!-- rowspan==2 is for overall row -->
                                                    <td rowspan="{{dottedScore.SectionID==10 ? '2' : '1'}}"><b>{{dottedScore.SectionDescription}}</b></td>
                                                    <td style="text-align: center;font-size: 12px;">{{dottedScore.Dot1Weight*100}}</td>
                                                    <td style="text-align: center;font-size: 12px;">{{parseFloat(dottedScore.Dot1WeightedScore).toFixed(2)}}</td>
                                                    <td style="text-align: center;font-size: 12px;">{{dottedScore.Dot2Weight*100}}</td>
                                                    <td style="text-align: center;font-size: 12px;">{{parseFloat(dottedScore.Dot2WeightedScore).toFixed(2)}}</td>
                                                    <td style="text-align: center;font-size: 12px;" ng-if="hasDotted > 2">{{dottedScore.Dot3Weight*100}}</td>
                                                    <td style="text-align: center;font-size: 12px;" ng-if="hasDotted > 2">{{parseFloat(dottedScore.Dot3WeightedScore).toFixed(2)}}</td>
                                                </tr>
                                                <!-- rows with performance description in overall section -->
                                                <tr ng-if="dottedScore.SectionID==10" class="overall">
                                                    <td colspan="2" ng-if="dottedScore.SectionID==10" style="text-align: center;"><b>{{dottedScore.Dot1Description}}</b></td>
                                                    <td colspan="2" ng-if="dottedScore.SectionID==10" style="text-align: center;"><b>{{dottedScore.Dot2Description}}</b></td>
                                                    <td colspan="2" ng-if="dottedScore.SectionID==10 && hasDotted > 2" style="text-align: center;"><b>{{dottedScore.Dot3Description}}</b></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </th>
							<!--<th style="text-align: center;"><b>Actual Evaluator Score</b></th>-->
							<th ng-if="userRole != 'emp'" style="text-align: center; border-right-width: 2px; vertical-align: top;"><b>Evaluator Score</b></th>
							<!--<th style="text-align: center;"><b>Actual Revision Score</b></th>-->
							<th ng-if="userRole == 'emp'" style="text-align: center; border-right-width: 2px; vertical-align: top;"><b>Evaluation Final Score</b></th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="score in scores track by $index" class="{{scoreClasses[$index]}}">
							<td><b>{{score.SectionDescription}}</b></td>
							<td style="text-align: center; font-size: 12px; border-right-width: 2px;">{{score.ScoreWeight * 100}}</td>
							<!--<td style="text-align: center; font-size: 12px;">{{score.EmpScore}}</td>-->
							<td style="text-align: center; font-size: 12px; border-right-width: 2px;">{{score.EmpScore ? roundUp(score.ScoreWeight * score.EmpScore) : '-'}} </td>
                            <td ng-if="state >= arcopmState.EvalByDotted && hasDotted >= 1" style="text-align: center; font-size: 12px; border-right-width: 2px;">{{score.DotScore ? roundUp(score.ScoreWeight * score.DotScore) : '-'}} </td>
							<!--<td style="text-align: center; font-size: 12px;">{{score.EvalScore}}</td>-->
							<td ng-if="userRole != 'emp'" style="text-align: center; font-size: 12px; border-right-width: 2px;">{{score.EvalScore ? roundUp(score.ScoreWeight * score.EvalScore) : '-'}} / <label style="color: green;">{{score.RevScore ? roundUp(score.ScoreWeight * score.RevScore) : '-'}}</label></td>
							<!--<td style="text-align: center; font-size: 12px;">{{score.RevScore}}</td>-->
							<td ng-if="userRole == 'emp'" style="text-align: center; font-size: 12px; border-right-width: 2px;">{{score.RevScore ? roundUp(score.ScoreWeight * score.RevScore) : '-'}}</td>
						</tr>
						<tr style="background-color: #9fc995;">
							<td rowspan="2"><br/><b>Overall Performance Score</b></td>
							<td rowspan="2" style="text-align: center; font-size: 12px; border-right-width: 2px;">{{totalWeight * 100}}</td>
							<!--<td style="text-align: center; font-size: 12px;">{{averageEmpScore ? averageEmpScore.toFixed(2): ''}}</td>-->
							<td style="text-align: center; font-size: 12px; border-right-width: 2px;">{{totalEmpWeightScore ? roundUp(totalEmpWeightScore) : '-'}}</td>
                            <td ng-if="state >= arcopmState.EvalByDotted && hasDotted >= 1" style="text-align: center; font-size: 12px; border-right-width: 2px;">{{totalDotWeightScore ? roundUp(totalDotWeightScore) : '-'}}</td>
							<!--<td style="text-align: center; font-size: 12px;">{{averageEvalScore ? averageEvalScore.toFixed(2) : ''}}</td>-->
							<td ng-if="userRole != 'emp'" style="text-align: center; font-size: 12px; border-right-width: 2px;">{{totalEvalWeightScore ? roundUp(totalEvalWeightScore) : '-'}} / <label style="color: green;">{{totalRevWeightScore ? roundUp(totalRevWeightScore) : '-'}}</label></td>
							<!--<td style="text-align: center; font-size: 12px;">{{averageRevScore ? averageRevScore.toFixed(2) : ''}}</td>-->
							<td ng-if="userRole == 'emp'" style="text-align: center; font-size: 12px; border-right-width: 2px;">{{totalRevWeightScore ? roundUp(totalRevWeightScore) : '-'}}</td>
						</tr>
						<tr style="background-color: #9fc995;">
							<!-- colspan="2" bellow if we open the 3 columns we commented out above -->

							<td style="text-align: center; border-right-width: 2px;"><b>{{totalEmpWeightScore == 0 ? '-' : totalEmpWeightScore < scoreScales.ScaleTo1 ? scoreDefinition[0] : totalEmpWeightScore < scoreScales.ScaleTo2 ? scoreDefinition[1] : totalEmpWeightScore < scoreScales.ScaleTo3 ? scoreDefinition[2] : scoreDefinition[3] }}</b></td>
                            <td ng-if="state >= arcopmState.EvalByDotted && hasDotted >= 1" style="text-align: center; border-right-width: 2px;"><b>{{totalDotWeightScore == 0 ? '-' : totalDotWeightScore < scoreScales.ScaleTo1 ? scoreDefinition[0] : totalDotWeightScore < scoreScales.ScaleTo2 ? scoreDefinition[1] : totalDotWeightScore < scoreScales.ScaleTo3 ? scoreDefinition[2] : scoreDefinition[3] }}</b></td>
							<td ng-if="userRole != 'emp'" style="text-align: center; border-right-width: 2px;">
								<b>{{totalEvalWeightScore == 0 ? '-' : totalEvalWeightScore < scoreScales.ScaleTo1 ? scoreDefinition[0] : totalEvalWeightScore < scoreScales.ScaleTo2 ? scoreDefinition[1] : totalEvalWeightScore < scoreScales.ScaleTo3 ? scoreDefinition[2] : scoreDefinition[3] }}</b>
								/ <label style="color: green;">{{totalRevWeightScore == 0 ? '-' : totalRevWeightScore < scoreScales.ScaleTo1 ? scoreDefinition[0] : totalRevWeightScore < scoreScales.ScaleTo2 ? scoreDefinition[1] : totalRevWeightScore < scoreScales.ScaleTo3 ? scoreDefinition[2] : scoreDefinition[3] }}</label>
							</td>
							<td ng-if="userRole == 'emp'" style="text-align: center; border-right-width: 2px;"><b>{{totalRevWeightScore == 0 ? '-' : totalRevWeightScore < scoreScales.ScaleTo1 ? scoreDefinition[0] : totalRevWeightScore < scoreScales.ScaleTo2 ? scoreDefinition[1] : totalRevWeightScore < scoreScales.ScaleTo3 ? scoreDefinition[2] : scoreDefinition[3] }}</b></td>
						</tr>
					</tbody>
				</table>
				<label style="color: green; font-size: 11px;">* Evaluator's revision scores.</label>
				
				<div class="container" ng-show="showScoresMessage('loading')" style="width: 605px;">
					<div class="content">
						<div class="circle"></div>
						<div class="circle1"></div>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-success ">
			<div class="panel-heading" style="text-align:center;">
				<strong>Rating Scales</strong>
			</div>
			<div class="panel-body">
				<div class="panel-group" id="accordion">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h4 class="panel-title">
								<a data-toggle="collapse" data-parent="#accordion" data-target="#collapse1" ng-click="showFilters('collapse1')" href>
                                    <i ng-hide="show1" class="fa fa-plus" aria-hidden="true"></i>
                                    <i ng-show="show1" class="fa fa-minus" aria-hidden="true"></i>
                                    Performance Standards & Competencies
                                </a>
							</h4>
						</div>
						<div id="collapse1" class="panel-collapse collapse in">
							<div class="panel-body">
								<table class="table table-bordered formNotes">
									<col width="40%" />
									<col width="20%" />
									<col width="20%" />
									<col width="20%" />
									<tbody>
										<tr>
											<td><b>Performance Improvement Needed</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">1.00</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">1.49</td>
										</tr>
										<tr>
											<td><b>Building Capability</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">1.50</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">2.99</td>
										</tr>
										<tr>
											<td><b>Achieving Performance</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">3.00</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">3.49</td>
										</tr>
										<tr>
											<td><b>Leading Performance</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">3.50</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">4.00</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading">
							<h4 class="panel-title">
								<a data-toggle="collapse" data-parent="#accordion" data-target="#collapse2" ng-click="showFilters('collapse2')" href>
                                    <i ng-hide="show2" class="fa fa-plus" aria-hidden="true"></i>
                                    <i ng-show="show2" class="fa fa-minus" aria-hidden="true"></i>
                                    Goals
                                </a>
							</h4>
						</div>
						<div id="collapse2" class="panel-collapse collapse">
							<div class="panel-body">
								<table class="table table-bordered formNotes">
									<col width="40%" />
									<col width="10%" />
									<col width="10%" />
									<col width="10%" />
									<col width="10%" />
									<col width="10%" />
									<col width="10%" />
									<tbody>
										<tr>
											<td><b>Performance Improvement Needed</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">0.00</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">2.49</td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">0%</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">74%</td>
										</tr>
										<tr>
											<td><b>Building Capability</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">2.50</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">2.99</td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">75%</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">89%</td>
										</tr>
										<tr>
											<td><b>Achieving Performance</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">3.00</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">3.49</td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">90%</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">104%</td>
										</tr>
										<tr>
											<td><b>Leading Performance</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">3.50</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">4.00</td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">105%</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">120%</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading">
							<h4 class="panel-title">
								<a data-toggle="collapse" data-parent="#accordion" data-target="#collapse3" ng-click="showFilters('collapse3')" href>
                                    <i ng-hide="show3" class="fa fa-plus" aria-hidden="true"></i>
                                    <i ng-show="show3" class="fa fa-minus" aria-hidden="true"></i>
                                    Overall Performance Score ({{scoreScales.GroupDesc}})
                                </a>
							</h4>
						</div>
						<div id="collapse3" class="panel-collapse collapse">
							<div class="panel-body">

								<table class="table table-bordered formNotes">
									<col width="40%" />
									<col width="20%" />
									<col width="20%" />
									<col width="20%" />
									<tbody>
										<tr>
											<td><b>Performance Improvement Needed</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">0{{scoreScales.ScaleFrom1}}</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">{{scoreScales.ScaleTo1}}</td>
										</tr>
										<tr>
											<td><b>Building Capability</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">{{scoreScales.ScaleFrom2}}</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">{{scoreScales.ScaleTo2}}</td>
										</tr>
										<tr>
											<td><b>Achieving Performance</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">{{scoreScales.ScaleFrom3}}</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">{{scoreScales.ScaleTo3}}</td>
										</tr>
										<tr>
											<td><b>Leading Performance</b></td>
											<td style="text-align: right; font-size: 12px; border-right-style: hidden;">{{scoreScales.ScaleFrom4}}</td>
											<td style="text-align: center; font-size: 12px; border-right-style: hidden;">-</td>
											<td style="text-align: left; font-size: 12px;">{{scoreScales.ScaleTo4}}</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div style=" width:59vw; ">
        <div class=" note" >
         <br>
        <div class="row">
            <div class="panel panel-success ">
                <div style="float:left;"><img class="imgHeader" ng-src="{{photoUrl}}{{empDetails.empNo}}b.jpg"   err-src="{{photoUrl}}male.gif"></div>
                <div class="panel-heading" style="text-align:center;">
					<br>
					<b>{{empDetails.familyName}} {{empDetails.firstName}} EVALUATION </b>
					<br>
				   Evaluation Period: {{empDetails.startDate}} / {{empDetails.endDate}}
				   <br>
				   <br>
                </div>
				<div class="panel-body">
					<div class="row">
						<div class="form-group col-xs-2">
							<div class="detailsCardLabel"><b>Employee No:   </b></div>
							<div class="detailsCardLabel"><b>Employee Name: </b></div>
							<div class="detailsCardLabel"><b>Site:          </b></div>
						</div>
						<div class="form-group col-xs-3">
							<div class="detailsCard">{{empDetails.empNo}}</div>
							<div class="detailsCard">{{empDetails.empName}}</div>
							<div class="detailsCard">{{empDetails.empSite}} - {{empDetails.empSiteDesc}}</div>
						</div>
						<div class="form-group col-xs-2">
							<div class="detailsCardLabel"><b>Job Position:  </b></div>
							<div class="detailsCardLabel"><b>Department:    </b></div>
							<div class="detailsCardLabel"><b>Category:    </b></div>
						</div>
						<div class="form-group col-xs-2">
							<div class="detailsCard">{{empDetails.empPosition}}</div>
							<div class="detailsCard">{{empDetails.empDepartment}}</div>
							<div class="detailsCard">{{empDetails.empCategory}}</div>
						</div>
						<div class="form-group col-xs-2">
							<div class="detailsCardLabel"><b>Grade:    </b></div>
							<div class="detailsCardLabel"><b>Age:    </b></div>
							<div class="detailsCardLabel"><b>Group Years:    </b></div>
						</div>
						<div class="form-group col-xs-1">
							<div class="detailsCard">{{empDetails.empGrade}}</div>
							<div class="detailsCard">{{empDetails.empAge}}</div>
							<div class="detailsCard">{{empDetails.groupYears}}</div>
						</div>
					</div>
					<div class="row">
						<div class="panel panel-default" ng-hide="activeSection==0" style="margin-bottom: 0px; border:0px; box-shadow: 0px 0px 0px; border-radius: 0px; display: -moz-deck; width: 100%;">
							<div class="panel-heading" style="text-align: center; padding-bottom: 0px;">
								<h3 class="panel-title pull-left" style="color: #575757;">Questionnaire Sections</h3><br/>
								<div>
									<button ng-repeat="section in questionnaireSections"
											class="w3-button w3-circle w3-small {{(section.SectionID==activeSection) ? 'w3-light-blue-custom' : (state==arcopmState.EvalComplete || ( state > arcopmState.EvalByEmployee && list == 'mylist')) ? 'w3-green' : (section.SectionNo == '7') ? 'w3-grey-custom' : (section.RequiredAnswers==0 || state == arcopmState.EvalByDotted) ? 'w3-light-green' : (section.PendingAnswers==0) ? 'w3-green' : (section.PendingAnswers==section.RequiredAnswers) ? 'w3-grey-custom' : 'w3-red-custom'}}"
											ng-click="setActiveSection(section.SectionID,empDetails.State)" style="margin-right: 3px; padding: 11px 14px; {{(section.SectionID==activeSection) ? 'pointer-events: none;' : ''}}">
										<span style="padding: 2px;">{{section.SectionOrder}}</span>
									</button>
								</div>
								<!--<ul style="float: right; margin-top: -56px; text-align: left;">-->
								<div class="col-xs-12 col-md-12" style="margin-top: 20px; padding:0">
									<div class="col-xs-2 col-md-2" style="padding:0; text-align: left;" uib-tooltip="Current Section" tooltip-placement="top" tooltip-trigger="'mouseenter'">
										<label class="w3-light-blue-custom" style="width: 25px">&nbsp;</label>
										<span class="section-explanation"> Current Section</span>
									</div>
									<div class="col-xs-3 col-md-3" style="padding:0; text-align: left;" uib-tooltip="Section Without Answered Required Questions" tooltip-placement="top" tooltip-trigger="'mouseenter'">
										<label class="w3-grey-custom" style="width: 25px">&nbsp;</label>
										<span class="section-explanation"> Section Without Answered Req...</span>
									</div>
									<div class="col-xs-3 col-md-3" style="padding:0; text-align: left;" uib-tooltip="Section Without Required Questions" tooltip-placement="top" tooltip-trigger="'mouseenter'">
										<label class="w3-light-green" style="width: 25px">&nbsp;</label>
										<span class="section-explanation"> Section Without Required Quest...</span>
									</div>
									<div class="col-xs-2 col-md-2" style="padding:0; text-align: left;" uib-tooltip="Section With Completed Required Questions" tooltip-placement="top" tooltip-trigger="'mouseenter'">
										<label class="w3-green" style="width: 25px">&nbsp;</label>
										<span class="section-explanation"> Section With Compl...</span>
									</div>
									<div class="col-xs-2 col-md-2" style="padding:0; text-align: left;" uib-tooltip="Section With Pending Required Questions" tooltip-placement="top" tooltip-trigger="'mouseenter'">
										<label class="w3-red-custom" style="width: 25px">&nbsp;</label>
										<span class="section-explanation"> Section With Pend...</span>
									</div>
								</div>
								<!--</ul>-->
							</div>
						</div>
						<div class="form-group col-xs-12"  style="padding-right: 0px;padding-left: 0px;" ng-show="showMessage('none')">
							<div ng-repeat="section in questionnaireSections track by $index">
								<div class="panel panel-success box-one" ng-show="section.SectionID==activeSection" style="margin-bottom:0px;  border-bottom-color: #fff; border:0px; box-shadow: 0px 0px 0px; border-radius: 0px;">
									<div class="panel-heading">
										<h3 class="panel-title pull-left">SECTION {{section.SectionOrder}} - {{section.SectionDescription}}</h3><br/>
										<button type="button" class="btn btn-default pull-right" ng-click="setAnswers(questionnaireSections[$index+1].SectionID,section.SectionID,empDetails.State,0)" ng-hide="parseInt($index+1)>=parseInt(sections) && resume == 0">Next <span class="glyphicon glyphicon-chevron-right"></span></button>

										<button type="button" class="btn btn-success pull-right" ng-if="((state >= arcopmState.EvalByEmployee && state < arcopmState.EvalByReviewer) && list != 'mylist') || (list == 'mylist' && state == arcopmState.EvalByEmployee)" ng-click="setAnswers(questionnaireSections[$index+1].SectionID,section.SectionID,empDetails.State,0,1)" ng-hide="parseInt($index+1)!=parseInt(sections)" ng-disabled="!form.$valid || pendingAnswers" style="margin-right: 2px;"
												tooltip-placement="top" tooltip-trigger="'mouseenter'" ng-attr-uib-tooltip="{{!form.$valid || pendingAnswers ? 'Button will become active only after you answer all required questions in all sections. Check sections with red and grey color.' : ''}}"><span class="glyphicon glyphicon-floppy-disk"></span> Finish & Submit</button>
												
										<button type="button" class="btn btn-success pull-right" ng-if="(state == arcopmState.EvalByReviewer && list != 'mylist')" ng-click="setAnswers(questionnaireSections[$index+1].SectionID,section.SectionID,empDetails.State,0,1)" ng-hide="parseInt($index+1)!=parseInt(sections)" style="margin-right: 2px;"
												tooltip-placement="top" tooltip-trigger="'mouseenter'"><i class="fa fa-check-square-o" aria-hidden="true"></i> Submit Review & Finalize</button>

										<button type="button" class="btn btn-default pull-right" ng-click="setAnswers(questionnaireSections[$index-1].SectionID,section.SectionID,empDetails.State,0)" ng-hide="parseInt($index)==0 && resume == 0" style="margin-right: 2px;"><span class="glyphicon glyphicon-chevron-left"></span> Back</button>

										<button type="button" class="btn btn-default pull-right" ng-if="((state >= arcopmState.EvalByEmployee && state < arcopmState.EvalComplete) && list != 'mylist') || (list == 'mylist' && state == arcopmState.EvalByEmployee)" ng-click="setAnswers(questionnaireSections[$index].SectionID,section.SectionID,empDetails.State,1)" style="margin-right: 50px;"><span class="glyphicon glyphicon-pause"></span> Save & Exit</button>

										<button type="button" class="btn btn-default pull-right" ng-if="state==arcopmState.EvalComplete || (state > arcopmState.EvalByEmployee && state < arcopmState.EvalComplete && list == 'mylist')" ng-click="$state.go('evaluationLists',{fromList:list})" style="margin-right: 50px;"><span class="fa fa-users"></span> Return to Evaluations</button>

										<button type="button" class="btn btn-default pull-right" ng-if="state==arcopmState.EvalComplete" ng-click="showEvalPreviewForPDF(evaluation,empid)"><span class="glyphicon glyphicon-eye-open"></span> PDF Summary</button>

										<div class="clearfix"></div>
									</div>
									<div class="alert alert-warning" ng-if="empid != userid && state == arcopmState.EvalByEmployee" style="border-radius: 0px; font-weight: bold; font-size: 17px; color: #c25d5d;">
										Evaluating on behalf of {{behalfUser}}
									</div>
									<div class="alert alert-warning" ng-if="empDetails.empNo !== empDetails.SelfEvalUser && state > arcopmState.EvalByEmployee" style="border-radius: 0px; font-weight: bold; font-size: 17px; color: #c25d5d;">
										Self Evaluation was completed on behalf of the employee by their Evaluator.
									</div>
                                    <div class="bg-warning" ng-if="dottedAnswers && dottedAnswers.length!=0 && state > arcopmState.EvalByDotted && hasDotted > 1">
                                        &nbsp;
                                        <div class="notifications">
                                            <div class="toggle">D</div>
                                        </div>
                                        This evaluation contains answers from more than one Dotted. The answers and scores are displayed as average, if you want to see the answers per dotted click on this icon next to each question or at the scores.</div><br/>
									<div class="panel-body">
										<form name="form">
											<div class="row" ng-init="getUserGoals(empid,evaluation)" ng-if="section.SectionID == 3">
												<div class="dataTable goals-table">
													<table>
														<thead>
															<tr class="headerRowPopup">
																<th></th>
																<th style="width:15%; vertical-align: middle;">ATTRIBUTE</th>
																<th style="width:20%; vertical-align: middle;">GOAL</th>
																<th class="center" style="width:5%">WEIGHT %</th>
                                                                <th class="center" ng-attr-style="{{state == arcopmState.EvalByEmployee ? 'width:50%;background-color:#c3c3c3 !important;' : 'width:5%;background-color:#c3c3c3 !important;'}}">EMPLOYEE ACHIEVEMENT<br/>% ( >0 )&nbsp;<label ng-if="state == arcopmState.EvalByEmployee" style="color:#a20a0a">*</label></th>
                                                                <th class="center" ng-attr-style="{{state == arcopmState.EvalByDotted ? 'width:50%;background-color:#f2ac49 !important;' : 'width:5%;background-color:#f2ac49 !important;'}}">DOTTED ACHIEVEMENT<br/>% ( >0 )</th>
                                                                <th ng-if="(userRole != 'emp' && userRole != 'dotted') || (userRole == 'emp' && state==arcopmState.EvalComplete)" class="center" ng-attr-style="{{(state == arcopmState.EvalByEvaluator || state == arcopmState.EvalByReviewer) ? 'width:50%;background-color:#a9cb97 !important;' : 'width:5%;background-color:#a9cb97 !important;'}}">EVALUATOR ACHIEVEMENT<br/>% ( >0 )&nbsp;<label ng-if="state == arcopmState.EvalByEvaluator || state == arcopmState.EvalByReviewer" style="color:#a20a0a">*</label></th>
															</tr>
														</thead>
														<tbody>
															<tr ng-repeat="goal in goals track by $index" ng-class="{'oddRow' : $odd, 'evenRow': $even}">
																<td class="center">{{$index+1}}</td>
																<td style="vertical-align: middle;" ><span uib-tooltip="{{goal.AttributeFullDescription}}" tooltip-placement="top" tooltip-trigger="'mouseenter'">{{goal.AttributeCode}} - {{goal.CodeDescription}}</span></td>
																<td style="vertical-align: middle;">{{goal.GoalDescription}}</td>
																<td class="center">{{goal.Weight}}</td>
																<td ng-attr-style="{{state != arcopmState.EvalByEmployee ? 'vertical-align: middle; text-align: center;' : ''}}">
																	<div ng-if="state == arcopmState.EvalByEmployee" layout="" ng-init="goal.EmpAchievement ? goal.EmpAchievement = parseInt(goal.EmpAchievement) : goal.EmpAchievement = 0" style="padding: 30px 0px 0px 0px;">
																		<div flex="10" layout="" layout-align="center center">
																			<span class="md-body-1">0</span>
																		</div>
																		<md-slider flex="" md-discrete="" ng-model="goal.EmpAchievement" step="1" min="0" max="120" aria-label="rating" ></md-slider>
																		<div flex="10" layout="" layout-align="center center">
																			<span class="md-body-1">120</span>
																		</div>
																		<div flex="10" layout="" layout-align="center center" style="max-width: 13%;">
																			<input flex type="number" ng-model="goal.EmpAchievement" ng-change="noNullEmpAchievement(goal)"  step="1" min="0" aria-label="green" aria-controls="green-slider" style="width: 100%" required>&nbsp;<label style="color:red">*</label>
																		</div>
																	</div>
																	<div ng-if="state == arcopmState.EvalByEmployee" style="text-align: center;">
																		<label ng-if="goal.EmpAchievement > 0 && goal.EmpAchievement < 75">Performance Improvement Needed</label>
																		<label ng-if="goal.EmpAchievement >= 75 && goal.EmpAchievement < 90">Building Capability</label>
																		<label ng-if="goal.EmpAchievement >= 90 && goal.EmpAchievement < 105">Achieving Performance</label>
																		<label ng-if="goal.EmpAchievement >= 105 && goal.EmpAchievement <= 120">Leading Performance</label>
																	</div>
																	<span ng-if="state != arcopmState.EvalByEmployee">{{goal.EmpAchievement}}</span>
																</td>
                                                                <td ng-attr-style="{{state != arcopmState.EvalByDotted ? 'vertical-align: middle; text-align: center;' : ''}}">
																	<div ng-if="state == arcopmState.EvalByDotted" layout="" ng-init="goal.DottedAvgAnswer ? goal.DottedAvgAnswer = parseInt(goal.DottedAvgAnswer) : goal.DottedAvgAnswer = 0" style="padding: 30px 0px 0px 0px;">
																		<div flex="10" layout="" layout-align="center center">
																			<span class="md-body-1">0</span>
																		</div>
																		<md-slider flex="" md-discrete="" ng-model="goal.DottedAvgAnswer" step="1" min="0" max="120" aria-label="rating" ></md-slider>
																		<div flex="10" layout="" layout-align="center center">
																			<span class="md-body-1">120</span>
																		</div>
																		<div flex="10" layout="" layout-align="center center" style="max-width: 13%;">
																			<input flex type="number" ng-model="goal.DottedAvgAnswer" ng-change="noNullDottedAvgAnswer(goal)"  step="1" min="0" aria-label="green" aria-controls="green-slider" style="width: 100%" required>
																		</div>
																	</div>
																	<div ng-if="state == arcopmState.EvalByDotted" style="text-align: center;">
																		<label ng-if="goal.DottedAvgAnswer > 0 && goal.DottedAvgAnswer < 75">Performance Improvement Needed</label>
																		<label ng-if="goal.DottedAvgAnswer >= 75 && goal.DottedAvgAnswer < 90">Building Capability</label>
																		<label ng-if="goal.DottedAvgAnswer >= 90 && goal.DottedAvgAnswer < 105">Achieving Performance</label>
																		<label ng-if="goal.DottedAvgAnswer >= 105 && goal.DottedAvgAnswer <= 120">Leading Performance</label>
																	</div>
																	<span ng-if="state != arcopmState.EvalByDotted">{{goal.DottedAvgAnswer}}</span>
                                                                    <div class="notifications" ng-if="hasDotted > 1 && state > arcopmState.EvalByDotted" ng-click="showDottedGoalAnswers(goal.GoalID)" ng-show="checkDottedGoalAnswersExistance(goal.GoalID)" style="margin-bottom: 25px;">
                                                                        <div class="toggle">D</div>
                                                                        <div class="messages goal{{goal.GoalID}}" style="text-align: left;">
                                                                            <div class="notify-messages-all">
                                                                                <a ng-repeat="dottedAnswer in dottedAnswers" ng-if="dottedAnswer.GoalID == goal.GoalID && dottedAnswer.Answer" href="#" class="notify-message">{{dottedAnswer.DotteLineName+': '+dottedAnswer.Answer}}</a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
																</td>
																<td ng-if="(userRole != 'emp' && userRole != 'dotted') || (userRole == 'emp' && state==arcopmState.EvalComplete)" ng-attr-style="{{(state != arcopmState.EvalByEvaluator && state != arcopmState.EvalByReviewer) ? 'vertical-align: middle; text-align: center;' : ''}}">
																	<div ng-if="state == arcopmState.EvalByEvaluator" layout="" ng-init="goal.EvalAchievement ? goal.EvalAchievement = parseInt(goal.EvalAchievement) : goal.EvalAchievement = 0" style="padding: 30px 0px 0px 0px;">
																		<div flex="10" layout="" layout-align="center center">
																			<span class="md-body-1">0</span>
																		</div>
																		<md-slider flex="" md-discrete="" ng-model="goal.EvalAchievement" step="1" min="0" max="120" aria-label="rating" ></md-slider>
																		<div flex="10" layout="" layout-align="center center">
																			<span class="md-body-1">120</span>
																		</div>
																		<div flex="10" layout="" layout-align="center center" style="max-width: 13%;">
																			<input flex type="number" ng-model="goal.EvalAchievement" ng-change="noNullEvalAchievement(goal)"  step="1" min="0" aria-label="green" aria-controls="green-slider" style="width: 100%" required>&nbsp;<label style="color:red">*</label>
																		</div>
																	</div>
																	<div ng-if="state == arcopmState.EvalByReviewer" layout="" ng-init="goal.RevAchievement ? goal.RevAchievement = parseInt(goal.RevAchievement) : goal.RevAchievement = parseInt(goal.EvalAchievement)" style="padding: 30px 0px 0px 0px;">
																		<div flex="10" layout="" layout-align="center center">
																			<span class="md-body-1">0</span>
																		</div>
																		<md-slider flex="" md-discrete="" ng-model="goal.RevAchievement" step="1" min="0" max="120" aria-label="rating" ></md-slider>
																		<div flex="10" layout="" layout-align="center center">
																			<span class="md-body-1">120</span>
																		</div>
																		<div flex="10" layout="" layout-align="center center" style="max-width: 13%;">
																			<input flex type="number" ng-model="goal.RevAchievement" ng-change="noNullEvalRevAchievement(goal)"  step="1" min="0" aria-label="green" aria-controls="green-slider" style="width: 100%" required>&nbsp;<label style="color:red">*</label>
																		</div>
																	</div>
																	<div ng-if="state == arcopmState.EvalByEvaluator" style="text-align: center;">
																		<label ng-if="goal.EvalAchievement > 0 && goal.EvalAchievement < 75">Performance Improvement Needed</label>
																		<label ng-if="goal.EvalAchievement >= 75 && goal.EvalAchievement < 90">Building Capability</label>
																		<label ng-if="goal.EvalAchievement >= 90 && goal.EvalAchievement < 105">Achieving Performance</label>
																		<label ng-if="goal.EvalAchievement >= 105 && goal.EvalAchievement <= 120">Leading Performance</label>
																	</div>
																	<div ng-if="state == arcopmState.EvalByReviewer" style="text-align: center;">
																		<label ng-if="goal.RevAchievement > 0 && goal.RevAchievement < 75">Performance Improvement Needed</label>
																		<label ng-if="goal.RevAchievement >= 75 && goal.RevAchievement < 90">Building Capability</label>
																		<label ng-if="goal.RevAchievement >= 90 && goal.RevAchievement < 105">Achieving Performance</label>
																		<label ng-if="goal.RevAchievement >= 105 && goal.RevAchievement <= 120">Leading Performance</label>
																	</div>
																	<span ng-if="state != arcopmState.EvalByEvaluator && state != arcopmState.EvalByReviewer">{{goal.RevAchievement ? goal.RevAchievement : goal.EvalAchievement}}</span>
																</td>
															</tr>
														</tbody>
													</table>
												</div>
											</div>

											<div class="row" ng-repeat="question in questions" ng-if="question.SectionID == section.SectionID">
												<!--ng-init below : in case we are in state 6(reviewer) we preload the answers. If evaluation is not paused then we preload evaluator's answers.  -->
												<div class="form-group col-xs-12 col-md-12"  style="margin-top: -15px; margin-bottom: 0px;" ng-init="(state == arcopmState.EvalByReviewer && !question.answer) ? question.answer = question.EvalAnswer : exit;">	
													<label>{{question.Title}}</label><br/>
													<label ng-hide="question.NumberingOff==1" style="display: initial;">{{question.QuestionOrder}}. </label><label style="font-weight: initial; display: initial; margin-bottom: 0px;">{{question.QuestionDescripton}}</label>&nbsp;<label ng-if="question.isRequired=='1' && state != arcopmState.EvalByDotted" style="color:red">*</label>
                                                    <div class="notifications" ng-if="hasDotted > 1 && state > arcopmState.EvalByDotted && question.QuestionTypeID == 1" ng-click="showDottedAnswers(question.QuestionID)" ng-show="checkDottedAnswersExistance(question.QuestionID)">
                                                        <div class="toggle">D</div>
                                                        <div class="messages question{{question.QuestionID}}">
                                                            <div class="notify-messages-all">
                                                                <a ng-repeat="dottedAnswer in dottedAnswers" ng-if="dottedAnswer.QuestionID == question.QuestionID" href="#" class="notify-message">{{dottedAnswer.DotteLineName+': '+dottedAnswer.Answer}}</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="clearfix" style="height: 30px;"></div>
													<div class="radioButtondemoBasicUsage" style="position: relative;" ng-if="question.QuestionTypeID == 5">		<!-- change after Internet Explorer problem(display:inline-flex) -->
														<div class="row" ng-if="section.SectionID == 6">
															<div class="dataTable devplan-table" style="margin-bottom: 25px;">
																<table>
																	<thead>
																		<tr class="headerRowPopup">
																			<th class="center" style="width:25%">Dev/ntal Objective<br/><span style="font-style: italic; font-weight: initial;">(Can include competencies, skills or performance standards or whatever else can be developed)</span></th>
																			<th class="center" title="Choose a developmental action based on the 'Golden Rule' that says: '60% can be on-the-job training, 30% coaching from manager and only 10% classroom training'.">Dev/ntal Action</th>
																			<th class="center">Additional Information / Clarifications</th>
																			<th class="center">By When?</th>
																			<th class="center" title="Refers to the person who is responsible for the implementation of the developmental action. For example, who is responsible to conduct the on-the-job training to the employee?">By Whom?<br/><span style="font-style: italic; font-weight: initial;">(where applicable)</span></th>
                                                                            <th class="center" style="width:11%" ng-if="state >= arcopmState.EvalByEvaluator">Evaluator's<br/>Approval</th>
                                                                            <th style="width:5%" ng-if="state != arcopmState.EvalComplete"><br/>
																				<div ng-if="showAddNewDevplanButton && (((state >= arcopmState.EvalByEmployee && state < arcopmState.EvalComplete) && list != 'mylist') || (list == 'mylist' && state == arcopmState.EvalByEmployee))" class="add-new-devplan" ng-click="showAddNewDevplanPopup(evaluation,state)" style="text-align: center;"
																					uib-tooltip="Add New Development Plan" tooltip-placement="left" tooltip-trigger="'mouseenter'">
																					<i class="fa fa-plus-circle fa-2x" aria-hidden="true" style="color: #0BC512;"></i>
																				</div>
																			</th>
																		</tr>
																	</thead>
																	<tbody>
																		<tr ng-repeat="historydevplan in historydevplans" ng-class="{'oddRow' : $odd, 'evenRow': $even}" ng-attr-style="{{getRowColor(historydevplan.State)}}">
																			<td class="center">{{historydevplan.Objective}}</td>
																			<td class="center">{{historydevplan.Action==1 ? ' On-the-job training' : historydevplan.Action==2 ? 'Classroom training, formal learning or education' : historydevplan.Action==3 ? 'Other action' : ''}}</td>
																			<td class="center">{{historydevplan.AdditionalInfo}}</td>
																			<td class="center">{{historydevplan.ByWhen}}</td>
																			<td class="center">{{historydevplan.ByWhom}}</td>
                                                                            <td class="center" ng-if="state >= arcopmState.EvalByEvaluator">
                                                                                <div ng-if="state == arcopmState.EvalByEvaluator || state == arcopmState.EvalByReviewer" class="btn-group">
                                                                                    <label ng-if="historydevplan.State<5" ng-class="(historydevplan.ApprovedByEvaluator == 0) ? 'btn btn-default active' : 'btn btn-default'"  uib-btn-radio="0" ng-model="historydevplan.ApprovedByEvaluator" ng-click="updateDevelopmentPlanStatus(historydevplan);" required>No</label>
                                                                                    <label ng-if="historydevplan.State<5" ng-class="(historydevplan.ApprovedByEvaluator == 1) ? 'btn btn-default active' : 'btn btn-default'"  uib-btn-radio="1" ng-model="historydevplan.ApprovedByEvaluator" ng-click="updateDevelopmentPlanStatus(historydevplan);" required>Yes</label>
                                                                                    <label ng-if="historydevplan.State>=5">{{historydevplan.ApprovedByEvaluator==1 ? 'Yes' : 'No'}}</label>
                                                                                </div>
                                                                                <div ng-if="(state == arcopmState.EvalComplete)" style="text-align:center;">
                                                                                    <label>{{historydevplan.ApprovedByEvaluator == 1 ? 'Yes' : historydevplan.ApprovedByEvaluator == 0 ? 'No' : ''}}</label>
                                                                                </div>
                                                                            </td>
																			<td class="center" style="display: -moz-inline-box;" ng-if="state != arcopmState.EvalComplete">
                                                                                <div ng-if="(historydevplan.State == state && historydevplan.UserID == userid)">
                                                                                    <span ng-if="((state >= arcopmState.EvalByEmployee && state < arcopmState.EvalComplete) && list != 'mylist') || (list == 'mylist' && state == arcopmState.EvalByEmployee)">
                                                                                        <button class="sitesBtn" ng-click="showEditDevplanPopup(evaluation,historydevplan,state)" uib-tooltip="Edit Development Plan" tooltip-placement="top" tooltip-trigger="'mouseenter'"><span class="glyphicon glyphicon-pencil" aria-hidden="true"  ></span></button>
                                                                                    </span>
                                                                                    <span ng-if="((state >= arcopmState.EvalByEmployee && state < arcopmState.EvalComplete) && list != 'mylist') || (list == 'mylist' && state == arcopmState.EvalByEmployee)">
                                                                                        <button class="sitesBtn" ng-click="showDeleteDevplanPopup(evaluation,historydevplan)" uib-tooltip="Delete Development Plan" tooltip-placement="top" tooltip-trigger="'mouseenter'"><span class="glyphicon glyphicon-trash" aria-hidden="true"  ></span></button>
                                                                                    </span>
                                                                                </div>
																			</td>
																		</tr>
																	</tbody>
																</table>
															</div>
															<div class="col-md-12" style="margin-top: 20px;">
																<span class="col col-md-4"><label class="color-explanation center" style="background-color: #ececec;">By Employee</label></span>
																<span class="col col-md-4"><label class="color-explanation center" style="background-color: #ffcc84;">By Dotted Line Manager</label></span>
																<span class="col col-md-4"><label class="color-explanation center" style="background-color: #c5e0b6;">By Evaluator</label></span>
															</div>
														</div>
													</div>
													<div class="radioButtondemoBasicUsage" style="margin-left: 5%; width: 95%; display: inline-flex; position: relative;" ng-if="question.QuestionTypeID == 1 || question.QuestionTypeID == 4">
														<md-radio-group class="md-primary questions" ng-model="question.answer" ng-disabled="questionStatus(state,question.Fillinby,userRole)" ng-required="question.isRequired==1 && !questionStatus(state,question.Fillinby,userRole) && state!=arcopmState.EvalComplete && state != arcopmState.EvalByDotted" style="width: 85%;">
															<md-radio-button ng-repeat="answer in mySplit(question.TypeValues)" value="{{answer}}"
																	ng-attr-style="{{(answer == question.EmpAnswer && state > arcopmState.EvalByEmployee) ? 'background-color: #ececec; border-radius: 9px; display: flex;' 
                                                                    : (answer == question.DottedAvgAnswer && state > arcopmState.EvalByEmployee) ? 'background-color: #ffcc84 ; border-radius: 9px; display: flex;'
                                                                    : (answer == question.EvalRevision && state > arcopmState.EvalByEvaluator) ? 'background-color: #c5e0b6; border-radius: 9px; display: flex;' 
                                                                    : ((answer == question.EvalAnswer  && !question.EvalRevision) && state > arcopmState.EvalByEvaluator) ? 'background-color: #c5e0b6; border-radius: 9px; display: flex;'  : ''}}"
																	><span>{{answer}}</span><span style="font-style: italic">{{answer=='1' ? ' - Performance Improvement Needed' : answer=='2' ? ' - Building Capability' : answer=='3' ? ' - Achieving Performance' : answer=='4' ? ' - Leading Performance' : '';}}</span>
																<span class="previous-answer" style="background-color: #c5e0b6;">
																	<label style="margin-bottom: 0px;" ng-if="((answer == question.EvalAnswer && !question.EvalRevision) || answer == question.EvalRevision ) && state > arcopmState.EvalByEvaluator">&nbsp&nbsp&nbsp Evaluator &nbsp&nbsp</label>
																</span>
                                                                <span class="previous-answer" style="background-color: #ffcc84;">
                                                                    <label style="margin-bottom: 0px;" ng-if="answer == question.DottedAvgAnswer && state > arcopmState.EvalByEmployee">&nbsp&nbsp&nbsp Dotted &nbsp&nbsp </label>
																</span>
																<span class="previous-answer">
																	<label style="margin-bottom: 0px;" ng-if="answer == question.EmpAnswer && state > arcopmState.EvalByEmployee">&nbsp&nbsp&nbsp Employee &nbsp&nbsp</label>
																</span>
															</md-radio-button>
														</md-radio-group>
													</div>

													<div style="width: 95%; display: inline-flex; position: relative;" ng-if="question.QuestionTypeID == 2">
														<div class="form-group col-xs-6 col-md-6">
															<textarea class="form-control" rows="3" ng-model="question.answer" ng-if="!questionStatus(state,question.Fillinby,userRole)" ng-required="question.isRequired==1 && !questionStatus(state,question.Fillinby,userRole) && state!=arcopmState.EvalComplete && state != arcopmState.EvalByDotted"></textarea>
														</div>
														<div class="form-group col-xs-6 col-md-6">
															<table class="table table-bordered" style="margin-bottom: 0px; width: 100%; font-size: 12px;">
																<col width="35%" />
																<col width="65%" />
																<tbody>
																	<tr ng-if="question.EmpAnswer && state > arcopmState.EvalByEmployee" style="background-color: #ececec;">
																		<td style="text-align: center;"><b>Employee</b></td>
																		<td style="text-align: center;">{{question.EmpAnswer}}</td>
																	</tr>
                                                                    <tr ng-repeat="dottedAnswer in dottedAnswers" ng-if="dottedAnswer.Answer && state >= arcopmState.EvalByDotted && dottedAnswer.UserID!=userid && question.QuestionID == dottedAnswer.QuestionID && question.SectionID == dottedAnswer.SectionID && userRole != 'emp'"  style="background-color: #ffcc84 ;">
																		<td style="text-align: center;"><b>Dotted Line Manager - {{dottedAnswer.DotteLineName}}</b></td>
																		<td style="text-align: center;">{{dottedAnswer.Answer}}</td>
																	</tr>
																	<tr ng-if="(question.EvalAnswer || question.EvalRevision) && state > arcopmState.EvalByEvaluator" style="background-color: #c5e0b6;">
																		<td style="text-align: center;"><b>Evaluator</b></td>
																		<td style="text-align: center;">{{state==arcopmState.EvalByReviewer ? question.EvalAnswer : question.EvalRevision}}</td>
																	</tr>
																</tbody>
															</table>
														</div>
													</div>
													<br/><hr/>
												</div>
												<div class="form-group col-xs-12 col-md-12" ></div>
											</div>
										</form>
										<div class="buttons" ng-show="section.SectionID==activeSection"style="margin-top: -40px">
											<button type="button" class="btn btn-default pull-right" ng-click="setAnswers(questionnaireSections[$index+1].SectionID,section.SectionID,empDetails.State,0)" ng-hide="parseInt($index+1)>=parseInt(sections) && resume == 0"> Next<span class="glyphicon glyphicon-chevron-right"></span></button>

											<button type="button" class="btn btn-success pull-right" ng-if="((state >= arcopmState.EvalByEmployee && state < arcopmState.EvalByReviewer) && list != 'mylist') || (list == 'mylist' && state == arcopmState.EvalByEmployee)" ng-click="setAnswers(questionnaireSections[$index+1].SectionID,section.SectionID,empDetails.State,0,1)" ng-hide="parseInt($index+1)!=parseInt(sections)" ng-disabled="!form.$valid || pendingAnswers" style="margin-right: 2px;"
													tooltip-placement="top" tooltip-trigger="'mouseenter'" ng-attr-uib-tooltip="{{!form.$valid || pendingAnswers ? 'Button will become active only after you answer all required questions in all sections. Check sections with red and grey color.' : ''}}"><span class="glyphicon glyphicon-floppy-disk"></span> Finish & Submit</button>
													
											<button type="button" class="btn btn-success pull-right" ng-if="(state == arcopmState.EvalByReviewer && list != 'mylist')" ng-click="setAnswers(questionnaireSections[$index+1].SectionID,section.SectionID,empDetails.State,0,1)" ng-hide="parseInt($index+1)!=parseInt(sections)" style="margin-right: 2px;"
													tooltip-placement="top" tooltip-trigger="'mouseenter'"><i class="fa fa-check-square-o" aria-hidden="true"></i> Submit Review & Finalize</button>

											<button type="button" class="btn btn-default pull-right" ng-click="setAnswers(questionnaireSections[$index-1].SectionID,section.SectionID,empDetails.State,0)" ng-hide="parseInt($index)==0 && resume == 0" style="margin-right: 2px;"><span class="glyphicon glyphicon-chevron-left"></span> Back</button>

											<button type="button" class="btn btn-default pull-right" ng-if="((state >= arcopmState.EvalByEmployee && state < arcopmState.EvalComplete) && list != 'mylist') || (list == 'mylist' && state == arcopmState.EvalByEmployee)" ng-click="setAnswers(questionnaireSections[$index].SectionID,section.SectionID,empDetails.State,1)" style="margin-right: 50px;"><span class="glyphicon glyphicon-pause"></span> Save & Exit</button>

                                            <button type="button" class="btn btn-default pull-right" ng-if="state==arcopmState.EvalComplete || (state > arcopmState.EvalByEmployee && state < arcopmState.EvalComplete && list == 'mylist')" ng-click="$state.go('evaluationLists',{fromList:list})" style="margin-right: 50px;"><span class="fa fa-users"></span> Return to Evaluations</button>

											<button type="button" class="btn btn-default pull-right" ng-if="state==arcopmState.EvalComplete" ng-click="showEvalPreviewForPDF(evaluation,empid)"><span class="glyphicon glyphicon-eye-open"></span> PDF Summary</button>
										</div>
									</div>
								</div>
							</div>
							<div class="panel panel-success box-one text-center" ng-show="activeSection==0">
								<div class="panel-heading">
									<label>Evaluation Completed Successfully!!!</label>
								</div>
								<div class="panel-body">
									<div>
										<i class="fa fa-check-circle" style="font-size: 15em; color: #80cb80;"></i>
									</div>
									<div>
										<button class="sitesBtn pull-left" ng-click="$state.go('evaluationLists',{fromList:list})" uib-tooltip="Go to Evaluation's List" tooltip-placement="top" tooltip-trigger="'mouseenter'" style="border-radius: 5%;">
										<span class="fa fa-users" aria-hidden="true"></span> Return to Evaluations</button>
									</div>
								</div>
							</div>
						</div>
						<div class="container" ng-show="showMessage('loading')" style=" margin-top: 20px;">
							<div class="content">
								<div class="circle"></div>
								<div class="circle1"></div>
							</div>
						</div>
					</div>

					<div class="row" ng-init="resume=0"><!-- After initialization of questions div above, we reinitialize $scope.resume to 0 in order to avoid the appearance of Back and Next buttons in the first and last section respectively(see ng-hide of buttons)-->
						<div class="panel panel-success " style="margin-bottom:0px; border-bottom-color: #fff; border:0px; box-shadow: 0px 0px 0px;">
							<div class="panel-heading">EVALUATION FLOW</div>
							   <div class="panel-body">
								   Here you can see the various steps the current evaluation must go through in order to be completed.
								<section>
									<div class="wizard">
										<div class="wizard-inner">
											<ul class="nav nav-tabs" role="tablist" style="bottom: 0; height: initial;">
												<li role="presentation" class="active" uib-tooltip="{{empDetails.firstName}} {{empDetails.familyName}} EMPLOYEE" tooltip-placement="top" tooltip-trigger="'mouseenter'">
													<a href d aria-controls="step1" role="tab"  title="Step 1" >
														<span class="round-tab">
															<i ><img class="img-circle" ng-src="{{photoUrl}}{{empDetails.empNo}}b.jpg" err-src="{{photoUrl}}male.gif"/></i>
														</span>
													</a>
												</li>
												<li role="presentation"  ng-repeat="emptarger in reportingLine" ng-attr-class="{{emptarger.state <= state ? 'active' : 'disabled'}}" uib-tooltip="{{emptarger.empName}} {{emptarger.RelationshipDesc}}" tooltip-placement="top" tooltip-trigger="'mouseenter'">
													<a href aria-controls="step{{$index + 2}}" role="tab" title="Step {{$index + 2}}"  >
														<span class="round-tab">
															<i><img class="img-circle" ng-src="{{photoUrl}}{{emptarger.empNo}}b.jpg" err-src="{{photoUrl}}male.gif"/></i>
														</span>
													</a>
												</li>
												<li role="presentation" ng-attr-class="{{state==arcopmState.EvalComplete ? 'active' : 'disabled'}}" uib-tooltip="Complete" tooltip-placement="top" tooltip-trigger="'mouseenter'">
													<a href aria-controls="complete" role="tab" title="Complete"  >
														<span class="round-tab">
															<i class="glyphicon glyphicon-ok" ></i>
														</span>
													</a>
												</li>
											</ul>
											<div class="connecting-line"></div>
										</div>
									</div>
								</section>
							</div>
						</div>
					</div>
				</div>
            </div>
		</div>
	</div>
</div>
<script>
$(document).ready(function(){
  $(".notifications .messages").hide();
});
</script>
<!-- end of evaluations -->
